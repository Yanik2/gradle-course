import java.time.LocalDate

/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.9/samples
 */

println "configuration phase"
println "gradle id: ${gradle.hashCode()}"
println "root: ${rootProject.hashCode()}, ${project.hashCode()}, ${gradle.rootProject.hashCode()}"

ext {
    javaVersion = 1234
    currentDate = LocalDate.now()
}

println javaVersion
println currentDate


//task hello(description: "Hello task", group: "yandev", type: DefaultTask) {
//    println "Configuration phase task hello"
//
//    doLast {
//        println "execution phase, Action 1"
//    }
//    doFirst {
//        println "execution phase, Action 2"
//    }
//    doLast {
//        println "execution phase, Action 3"
//    }
//    println "task: $description, group: $group, action: ${actions.size()}"
//    println "path task: $path"
//}

task first {
    doLast {
        println "Task 1"
    }
}

task second {
    doLast {
        println "Task 2"
    }
}

task third {
    doLast {
        println "Task 3"
    }
}

task fourth(group: "yandev") {
    doLast {
        println "Task 4"
    }
}

fourth.dependsOn(first)
fourth.dependsOn(second)
fourth.dependsOn(third)

first.mustRunAfter second

gradle.taskGraph.whenReady { TaskExecutionGraph graph ->
    println "---- Graph: "
    graph.allTasks.each {
        println "${it.name}"
    }
}

//gradle.taskGraph.beforeTask { task ->
//    if (task.group == "yandev") {
//        println "before task callback $task"
//    }
//
//}
//
//gradle.taskGraph.afterTask { task ->
//    println "after task callback $task"
//}

defaultTasks "second"